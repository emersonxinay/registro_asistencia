@model DetalleRamoViewModel

<div class="detalle-ramo-container">
    <!-- Header del Ramo -->
    <div class="ramo-header">
        <div class="ramo-info">
            <div class="ramo-titulo">
                <h1>@Model.Nombre</h1>
                <span class="ramo-codigo">@Model.Codigo</span>
            </div>
            @if (!string.IsNullOrEmpty(Model.Descripcion))
            {
                <p class="ramo-descripcion">@Model.Descripcion</p>
            }
            <div class="curso-reference">
                <span>ðŸ“š Curso:</span>
                <a href="/docente/cursos/@Model.CursoId" class="curso-link">
                    @Model.CursoNombre (@Model.CursoCodigo)
                </a>
            </div>
        </div>
        <div class="ramo-stats">
            <div class="stat-item">
                <span class="stat-number">@Model.Clases.Count</span>
                <span class="stat-label">Clases Totales</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">@Model.Clases.Count(c => c.Activa)</span>
                <span class="stat-label">Clases Activas</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">@Model.Clases.Sum(c => c.TotalAsistencias)</span>
                <span class="stat-label">Asistencias</span>
            </div>
        </div>
    </div>

    <!-- Acciones del Ramo -->
    <div class="ramo-actions">
        <a href="/workflow/curso/@Model.CursoId/ramo/@Model.Id/crear-clase" class="btn btn-primary">
            <i class="fas fa-plus"></i>
            Nueva Clase
        </a>
        <a href="/docente/ramos/@Model.Id/editar" class="btn btn-outline">
            <i class="fas fa-edit"></i>
            Editar Ramo
        </a>
        <a href="/docente/cursos/@Model.CursoId" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i>
            Volver al Curso
        </a>
    </div>

    <!-- Lista de Clases -->
    <div class="clases-section">
        <div class="section-header">
            <h2>ðŸ“… Clases del Ramo</h2>
            <span class="clases-count">@Model.Clases.Count clases registradas</span>
        </div>

        @if (Model.Clases.Any())
        {
            <div class="clases-list">
                @foreach (var clase in Model.Clases)
                {
                    <div class="clase-card @(clase.Activa ? "activa" : "finalizada")">
                        <div class="clase-header">
                            <div class="clase-info">
                                <h3>@clase.Nombre</h3>
                                <div class="clase-meta">
                                    <span class="fecha">
                                        <i class="fas fa-calendar"></i>
                                        @clase.FechaInicio.ToString("dd/MM/yyyy")
                                    </span>
                                    <span class="hora">
                                        <i class="fas fa-clock"></i>
                                        @clase.FechaInicio.ToString("HH:mm")
                                    </span>
                                </div>
                            </div>
                            <div class="clase-status">
                                @if (clase.Activa)
                                {
                                    <span class="badge activa">
                                        <i class="fas fa-play"></i>
                                        Activa
                                    </span>
                                }
                                else
                                {
                                    <span class="badge finalizada">
                                        <i class="fas fa-check"></i>
                                        Finalizada
                                    </span>
                                }
                            </div>
                        </div>

                        <div class="clase-stats">
                            <div class="asistencia-resumen">
                                <div class="asistencia-item presente">
                                    <span class="numero">@clase.PresentesCount</span>
                                    <span class="label">Presentes</span>
                                </div>
                                <div class="asistencia-item tarde">
                                    <span class="numero">@clase.TardesCount</span>
                                    <span class="label">Tardes</span>
                                </div>
                                <div class="asistencia-item ausente">
                                    <span class="numero">@clase.AusentesCount</span>
                                    <span class="label">Ausentes</span>
                                </div>
                                <div class="asistencia-item total">
                                    <span class="numero">@clase.TotalAsistencias</span>
                                    <span class="label">Total</span>
                                </div>
                            </div>
                        </div>

                        <div class="clase-actions">
                            @if (clase.Activa)
                            {
                                <a href="/docente/scanner/@clase.Id" class="btn-icon activa" title="Scanner de Asistencia">
                                    <i class="fas fa-qrcode"></i>
                                </a>
                            }
                            <a href="/admin/clases/@clase.Id" class="btn-icon" title="Ver Detalle">
                                <i class="fas fa-eye"></i>
                            </a>
                            <a href="/admin/clases/@clase.Id/asistencias" class="btn-icon" title="Gestionar Asistencias">
                                <i class="fas fa-list"></i>
                            </a>
                        </div>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="empty-state">
                <i class="fas fa-chalkboard-teacher"></i>
                <h3>No hay clases creadas</h3>
                <p>Este ramo aÃºn no tiene clases programadas.</p>
                <a href="/workflow/curso/@Model.CursoId/ramo/@Model.Id/crear-clase" class="btn btn-primary">
                    Crear Primera Clase
                </a>
            </div>
        }
    </div>
</div>

<style>
.detalle-ramo-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.ramo-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 2rem;
    border-radius: 12px;
    margin-bottom: 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.ramo-titulo {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
}

.ramo-titulo h1 {
    margin: 0;
    font-size: 2.5rem;
    font-weight: 600;
}

.ramo-codigo {
    background: rgba(255, 255, 255, 0.2);
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-weight: 500;
}

.ramo-descripcion {
    margin: 0 0 1rem 0;
    font-size: 1.1rem;
    opacity: 0.9;
    line-height: 1.5;
}

.curso-reference {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1rem;
    opacity: 0.9;
}

.curso-link {
    color: white;
    text-decoration: none;
    font-weight: 500;
    border-bottom: 1px solid rgba(255, 255, 255, 0.3);
}

.curso-link:hover {
    border-bottom-color: white;
}

.ramo-stats {
    display: flex;
    gap: 2rem;
}

.stat-item {
    text-align: center;
}

.stat-number {
    display: block;
    font-size: 2.5rem;
    font-weight: bold;
    margin-bottom: 0.5rem;
}

.stat-label {
    font-size: 0.9rem;
    opacity: 0.9;
}

.ramo-actions {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
    flex-wrap: wrap;
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

.section-header h2 {
    margin: 0;
    color: #333;
    font-size: 1.8rem;
}

.clases-count {
    color: #6c757d;
    font-size: 1rem;
    font-weight: 500;
}

.clases-list {
    display: grid;
    gap: 1.5rem;
}

.clase-card {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    border-left: 4px solid #dee2e6;
    transition: all 0.3s ease;
}

.clase-card.activa {
    border-left-color: #28a745;
    background: linear-gradient(135deg, #f8fff9 0%, #e8f5e8 100%);
}

.clase-card.finalizada {
    border-left-color: #6c757d;
}

.clase-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.15);
}

.clase-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1rem;
}

.clase-info h3 {
    margin: 0 0 0.5rem 0;
    color: #333;
    font-size: 1.4rem;
}

.clase-meta {
    display: flex;
    gap: 1rem;
    color: #6c757d;
    font-size: 0.9rem;
}

.clase-meta span {
    display: flex;
    align-items: center;
    gap: 0.3rem;
}

.badge {
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.3rem;
}

.badge.activa {
    background: #28a745;
    color: white;
}

.badge.finalizada {
    background: #6c757d;
    color: white;
}

.clase-stats {
    margin-bottom: 1rem;
}

.asistencia-resumen {
    display: flex;
    gap: 2rem;
    flex-wrap: wrap;
}

.asistencia-item {
    text-align: center;
    padding: 1rem;
    border-radius: 8px;
    min-width: 80px;
}

.asistencia-item.presente {
    background: #d4edda;
    color: #155724;
}

.asistencia-item.tarde {
    background: #fff3cd;
    color: #856404;
}

.asistencia-item.ausente {
    background: #f8d7da;
    color: #721c24;
}

.asistencia-item.total {
    background: #e2e3e5;
    color: #383d41;
}

.asistencia-item .numero {
    display: block;
    font-size: 1.5rem;
    font-weight: bold;
    margin-bottom: 0.25rem;
}

.asistencia-item .label {
    font-size: 0.8rem;
    font-weight: 500;
}

.clase-actions {
    display: flex;
    gap: 0.5rem;
    justify-content: flex-end;
}

.btn-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 8px;
    background: #f8f9fa;
    color: #6c757d;
    text-decoration: none;
    transition: all 0.2s ease;
    border: none;
    cursor: pointer;
}

.btn-icon:hover {
    background: #667eea;
    color: white;
    transform: translateY(-1px);
}

.btn-icon.activa {
    background: #28a745;
    color: white;
    animation: pulse 2s infinite;
}

@@keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(40, 167, 69, 0); }
    100% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0); }
}

.empty-state {
    text-align: center;
    padding: 4rem 2rem;
    color: #6c757d;
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.empty-state i {
    font-size: 4rem;
    margin-bottom: 1rem;
    color: #dee2e6;
}

.empty-state h3 {
    margin-bottom: 1rem;
    color: #495057;
    font-size: 1.6rem;
}

.empty-state p {
    margin-bottom: 2rem;
    font-size: 1.1rem;
}

.btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 500;
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-primary {
    background-color: #667eea;
    color: white;
}

.btn-primary:hover {
    background-color: #5a6fd8;
    transform: translateY(-1px);
}

.btn-secondary {
    background-color: #6c757d;
    color: white;
}

.btn-secondary:hover {
    background-color: #5a6268;
    transform: translateY(-1px);
}

.btn-outline {
    background-color: transparent;
    color: #667eea;
    border: 2px solid #667eea;
}

.btn-outline:hover {
    background-color: #667eea;
    color: white;
}

/* Responsive */
@@media (max-width: 768px) {
    .ramo-header {
        flex-direction: column;
        text-align: center;
        gap: 1.5rem;
    }

    .ramo-titulo {
        flex-direction: column;
        text-align: center;
        gap: 0.5rem;
    }

    .ramo-titulo h1 {
        font-size: 2rem;
    }

    .ramo-stats {
        justify-content: center;
        gap: 1rem;
    }

    .ramo-actions {
        justify-content: center;
    }

    .clase-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }

    .asistencia-resumen {
        gap: 1rem;
        justify-content: space-between;
    }

    .asistencia-item {
        min-width: 60px;
        padding: 0.75rem 0.5rem;
    }

    .clase-actions {
        justify-content: center;
    }
}

@@media (max-width: 480px) {
    .detalle-ramo-container {
        padding: 15px;
    }
    
    .ramo-header {
        padding: 1.5rem;
    }
    
    .clase-card {
        padding: 1rem;
    }
    
    .asistencia-resumen {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.5rem;
    }
}
</style>